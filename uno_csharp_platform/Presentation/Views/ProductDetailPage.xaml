<Page x:Class="uno_csharp_platform.Presentation.Views.ProductDetailPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Grid Grid.Row="0" 
              Background="{ThemeResource SystemAccentColor}" 
              Padding="15">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <Button Grid.Column="0" 
                   Content="â†" 
                   Command="{x:Bind ViewModel.NavigateBackCommand}" 
                   Background="Transparent" 
                   BorderThickness="0" 
                   FontSize="24" 
                   Foreground="White"/>

            <TextBlock Grid.Column="1" 
                      Text="Chi tiáº¿t sáº£n pháº©m" 
                      FontSize="20" 
                      FontWeight="SemiBold" 
                      Foreground="White" 
                      VerticalAlignment="Center" 
                      Margin="10,0,0,0"/>

            <Button Grid.Column="2" 
                   Content="ðŸ›’" 
                   Command="{x:Bind ViewModel.NavigateToCartCommand}" 
                   Background="Transparent" 
                   BorderThickness="0" 
                   FontSize="24" 
                   Foreground="White"/>
        </Grid>

        <!-- Content -->
        <ScrollViewer Grid.Row="1">
            <Grid>
                <!-- CONTENT -->
                <StackPanel Padding="20"
                            Visibility="{x:Bind ViewModel.Product, Mode=OneWay, Converter={StaticResource NullToCollapsedConverter}}">

                    <Border CornerRadius="12"
                            Height="300"
                            Margin="0,0,0,20">
                        <Image Source="{x:Bind ViewModel.Product.ImageUrl, Mode=OneWay}"
                            Stretch="UniformToFill"/>
                    </Border>

                    <TextBlock Text="{x:Bind ViewModel.Product.Name, Mode=OneWay}"
                            FontSize="28"
                            FontWeight="Bold"
                            TextWrapping="Wrap"
                            Margin="0,0,0,10"/>

                    <TextBlock FontSize="32"
                            FontWeight="Bold"
                            Foreground="{ThemeResource SystemAccentColor}"
                            Margin="0,0,0,15">
                        <Run Text="{x:Bind ViewModel.Product.Price, Mode=OneWay}"/>
                        <Run Text="â‚«"/>
                    </TextBlock>

                    <TextBlock Text="MÃ´ táº£ sáº£n pháº©m"
                            FontSize="18"
                            FontWeight="SemiBold"
                            Margin="0,0,0,10"/>

                    <TextBlock Text="{x:Bind ViewModel.Product.Description, Mode=OneWay}"
                            TextWrapping="Wrap"
                            Margin="0,0,0,20"
                            Opacity="0.7"/>

                    <StackPanel Orientation="Horizontal"
                                Margin="0,0,0,10">
                        <TextBlock Text="Danh má»¥c: "
                                FontWeight="SemiBold"/>
                        <TextBlock Text="{x:Bind ViewModel.Product.Category, Mode=OneWay}"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal"
                                Margin="0,0,0,20">
                        <TextBlock Text="Tá»“n kho: "
                                FontWeight="SemiBold"/>
                        <TextBlock Text="{x:Bind ViewModel.Product.Stock, Mode=OneWay}"/>
                        <TextBlock Text=" sáº£n pháº©m"/>
                    </StackPanel>

                    <TextBlock Text="Sá»‘ lÆ°á»£ng:"
                            FontWeight="SemiBold"
                            Margin="0,0,0,10"/>

                    <StackPanel Orientation="Horizontal"
                                Spacing="15"
                                Margin="0,0,0,20">
                        <Button Content="âˆ’"
                                Command="{x:Bind ViewModel.DecreaseQuantityCommand}"
                                Width="50"
                                Height="50"
                                FontSize="24"/>

                        <Border BorderBrush="{ThemeResource SystemControlForegroundBaseLowBrush}"
                                BorderThickness="1"
                                CornerRadius="4"
                                Width="80"
                                Height="50">
                            <TextBlock Text="{x:Bind ViewModel.Quantity, Mode=OneWay}"
                                    FontSize="24"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"/>
                        </Border>

                        <Button Content="+"
                                Command="{x:Bind ViewModel.IncreaseQuantityCommand}"
                                Width="50"
                                Height="50"
                                FontSize="24"/>
                    </StackPanel>

                    <TextBlock Text="{x:Bind ViewModel.Message, Mode=OneWay}"
                            Foreground="Green"
                            FontWeight="SemiBold"
                            Margin="0,0,0,10"
                            Visibility="{x:Bind ViewModel.Message, Mode=OneWay, Converter={StaticResource EmptyToCollapsedConverter}}"/>
                </StackPanel>

                <!-- LOADING OVERLAY -->
                <ProgressRing IsActive="{x:Bind ViewModel.IsLoading, Mode=OneWay}"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"/>
            </Grid>
        </ScrollViewer>


        <!-- Footer Button -->
        <Button Grid.Row="2" 
               Content="ThÃªm vÃ o giá» hÃ ng" 
               Command="{x:Bind ViewModel.AddToCartCommand}" 
               HorizontalAlignment="Stretch" 
               Margin="20" 
               Padding="0,15" 
               FontSize="18" 
               FontWeight="SemiBold" 
               Style="{StaticResource AccentButtonStyle}"/>
    </Grid>
</Page>