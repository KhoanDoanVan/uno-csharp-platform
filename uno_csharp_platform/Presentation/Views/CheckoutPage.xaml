<Page x:Class="uno_csharp_platform.Presentation.Views.CheckoutPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Grid Grid.Row="0" 
              Background="{ThemeResource SystemAccentColor}" 
              Padding="15">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Button Grid.Column="0" 
                   Content="←" 
                   Command="{x:Bind ViewModel.NavigateBackCommand}" 
                   Background="Transparent" 
                   BorderThickness="0" 
                   FontSize="24" 
                   Foreground="White"/>

            <TextBlock Grid.Column="1" 
                      Text="Xác nhận đơn hàng" 
                      FontSize="20" 
                      FontWeight="SemiBold" 
                      Foreground="White" 
                      VerticalAlignment="Center" 
                      Margin="10,0,0,0"/>
        </Grid>

        <!-- Form -->
        <ScrollViewer Grid.Row="1">
            <StackPanel Padding="20" 
                       MaxWidth="500">
                
                <TextBlock Text="Thông tin khách hàng" 
                          FontSize="22" 
                          FontWeight="SemiBold" 
                          Margin="0,0,0,20"/>

                <TextBox Header="Họ và tên *" 
                        Text="{x:Bind ViewModel.CustomerName, Mode=TwoWay}" 
                        Margin="0,0,0,15" 
                        PlaceholderText="Nhập họ và tên"/>

                <TextBox Header="Số điện thoại *" 
                        Text="{x:Bind ViewModel.PhoneNumber, Mode=TwoWay}" 
                        Margin="0,0,0,15" 
                        PlaceholderText="Nhập số điện thoại" 
                        InputScope="TelephoneNumber"/>

                <TextBox Header="Địa chỉ giao hàng *" 
                        Text="{x:Bind ViewModel.Address, Mode=TwoWay}" 
                        Margin="0,0,0,20" 
                        PlaceholderText="Nhập địa chỉ giao hàng" 
                        AcceptsReturn="True" 
                        TextWrapping="Wrap" 
                        Height="100"/>

                <TextBlock Text="{x:Bind ViewModel.ErrorMessage, Mode=OneWay}" 
                          Foreground="Red" 
                          TextWrapping="Wrap" 
                          Margin="0,0,0,15" 
                          Visibility="{x:Bind ViewModel.ErrorMessage, Mode=OneWay, Converter={StaticResource EmptyToCollapsedConverter}}"/>

                <Border Background="{ThemeResource SystemControlBackgroundAltHighBrush}" 
                       CornerRadius="8" 
                       Padding="15" 
                       Margin="0,0,0,20">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Text="Tổng tiền:" 
                                  FontSize="18" 
                                  FontWeight="SemiBold" 
                                  VerticalAlignment="Center"/>

                        <TextBlock Grid.Column="1" 
                                  FontSize="24" 
                                  FontWeight="Bold" 
                                  Foreground="{ThemeResource SystemAccentColor}">
                            <Run Text="{x:Bind ViewModel.TotalAmount, Mode=OneWay}"/>
                            <Run Text="₫"/>
                        </TextBlock>
                    </Grid>
                </Border>

                <ProgressRing IsActive="{x:Bind ViewModel.IsProcessing, Mode=OneWay}" 
                             HorizontalAlignment="Center" 
                             Margin="0,20,0,0"/>
            </StackPanel>
        </ScrollViewer>

        <!-- Footer -->
        <Button Grid.Row="2" 
               Content="Đặt hàng" 
               Command="{x:Bind ViewModel.PlaceOrderCommand}" 
               HorizontalAlignment="Stretch" 
               Margin="20" 
               Padding="0,15" 
               FontSize="18" 
               FontWeight="SemiBold" 
               Style="{StaticResource AccentButtonStyle}" 
               IsEnabled="{x:Bind ViewModel.IsProcessing, Mode=OneWay, Converter={StaticResource InverseBoolConverter}}"/>
    </Grid>
</Page>